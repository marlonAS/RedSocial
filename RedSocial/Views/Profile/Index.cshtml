@using Microsoft.AspNet.Identity
@model RedSocial.Models.ProfileViewModel
@{
    ViewBag.Title = "Perfil";
}

<hr>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>


@if (ViewBag.Error != null)
{
    <script>
        function() {
            Alert(ViewBag.Error);
        }</script>
}


@using (Html.BeginForm("Editar", "Profile", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <div class="row">

        <div class="col-sm-3">
            <!--left col-->

            <div class="text-center">
                <img src="@Url.Action("imagen","Profile",new {userID=@User.Identity.GetUserId() })" class="avatar img-circle img-thumbnail" alt="avatar">
                <input accept="image/*" type="file" class="form-control" id="Imagen" name="Imagen">
            </div><br>

        </div><!--/col-3-->
        <div class="col-sm-9">
            <hr>

            <div class="form-group">

                <div class="col-xs-3">
                    <label for="first_name"><h4>Nombre</h4></label>
                    @Html.TextBoxFor(d => d.Nombre, "", new { @class = "form-control" })
                </div>
            </div>
            <div class="form-group">

                <div class="col-xs-3">
                    <label for="last_name"><h4>Apellido</h4></label>
                    @Html.TextBoxFor(d => d.Apellido, "", new { @class = "form-control" })
                </div>
            </div>

            <div class="form-group">
                <div class="col-xs-6">
                    <label for="mobile"><h4>Telefono</h4></label>
                    @Html.TextBoxFor(d => d.Telefono, "", new { @class = "form-control" })
                </div>
            </div>
            <div class="form-group" style="text-align:center;">
                <div class="col-xs-12">
                    <br>
                    <button class="btn btn-lg btn-success" type="submit"><i class="glyphicon glyphicon-ok-sign"></i> Guardar</button>
                </div>
            </div>

            <hr>
        </div><!--/col-9-->
    </div><!--/row-->
}

<script>
    $(document).ready(function () {


        var readURL = function (input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function (e) {
                    $('.avatar').attr('src', e.target.result);
                }

                reader.readAsDataURL(input.files[0]);
            }
        }


        $(".file-upload").on('change', function () {
            readURL(this);
        });
    });
</script>
